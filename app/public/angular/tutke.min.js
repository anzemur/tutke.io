angular.module("tutke",["ngRoute"]).config(["$routeProvider","$locationProvider",function(t,n){t.when("/",{templateUrl:"index/index.component.html"}).when("/login",{templateUrl:"authentication/log-in/log-in.component.html",controller:"loginInCtrl",controllerAs:"vm"}).otherwise({redirecTo:"/"}),n.html5Mode(!0)}]),angular.module("tutke").directive("foot",function(){return{restrict:"EA",templateUrl:"/shared/directives/foot/foot.component.html"}}),angular.module("tutke").directive("navigation",function(){return{restrict:"EA",templateUrl:"/shared/directives/navigation/navigation.component.html"}}),function(){function t(e,o){var n=function(t){e.localStorage.jwt=t},r=function(){return e.localStorage.jwt},a=function(){var t=r();return!!t&&JSON.parse(e.atob(t.split(".")[1])).exDate>Date.now()/1e3};return{saveToken:n,getToken:r,doRegister:function(t){return o.post("/api/register",t).then(function(t){n(t.data.token)})},doLogIn:function(t){return o.post("/api/login",t).then(function(t){n(t.data.token)})},doLogOut:function(){e.localStorage.removeItem("token")},isLoggedIn:a,getCurrentUser:function(){if(a()){var t=r(),n=JSON.parse(e.atob(t.split(".")[1]));return o({url:"/users/"+n._id,method:"GET",params:{populate:!0}}).then(function(t){return t})}}}}t.$inject=["$window","$http"],angular.module("tutke").service("authentication",t)}(),function(){function t(n,t){var e=this;e.logInData={username:"",password:""},e.logInError="",e.indexPage=n.search().page||"/",e.checkLogInData=function(){if(e.logInError="",!e.logInData.username||!e.logInData.password)return!(e.logInError="Please enter username and password then try again.");e.doLogIn()},e.doLogIn=function(){e.logInError="",t.doLogIn(e.logInData).then(function(t){n.search("page",null),n.path(e.indexPage)},function(t){e.logInError=t.data.message})}}t.$inject=["$location","authentication"],angular.module("tutke").controller("loginInCtrl",t)}();